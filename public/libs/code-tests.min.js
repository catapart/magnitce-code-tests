const t={BeforeAll:"beforeall",AfterAll:"afterall",BeforeTest:"beforetest",AfterTest:"aftertest",BeforeHook:"beforehook",AfterHook:"afterhook",Cancel:"cancel",Context:"context",Reset:"reset"},e="code-test";class s extends HTMLElement{state={testId:"",description:"none",isDisabled:!1,testState:void 0,beforeEachState:void 0,afterEachState:void 0};setState(t){this.state=t,this.#t()}setStateProperties(t){this.setState({...this.state,...t})}setTestStateProperties(t,e){null!=this.state[t]&&this.setState({...this.state,[t]:{...this.state[t],...e}})}findElement(t){return this.querySelector(t)}findElements(t){return Array.from(this.querySelectorAll(t))}isRunning(){return 1==this.state.testState?.isRunning||1==this.state.beforeEachState?.isRunning||1==this.state.afterEachState?.isRunning}hasRun(){return 1==this.state.testState?.hasRun||1==this.state.beforeEachState?.hasRun||1==this.state.afterEachState?.hasRun}resultCategory(){const t=this.state.testState?.resultCategory??"none",e=this.state.beforeEachState?.resultCategory??"none",s=this.state.afterEachState?.resultCategory??"none";return"none"==t&&"none"==e&&"none"==s?"none":null==this.state.beforeEachState&&null==this.state.afterEachState?t:null!=this.state.beforeEachState&&null==this.state.afterEachState?"fail"==t||"fail"==e?"fail":"success"==t&&"success"==e?"success":"none":null==this.state.beforeEachState&&null!=this.state.afterEachState?"fail"==t||"fail"==s?"fail":"success"==t&&"success"==s?"success":"none":null!=this.state.beforeEachState&&null!=this.state.afterEachState?"fail"==t||"fail"==e||"fail"==s?"fail":"success"==t&&"success"==e&&"success"==s?"success":"none":void 0}connectedCallback(){this.#t()}#t(){this.innerHTML=`<details class="test-details" part="test-details" ${1==this.isRunning()||1==this.hasRun()?" open":""}>\n            <summary class="test-summary" part="test-summary">\n                <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\n                <div class="result-icon test-result-icon${"none"!=this.state.testState?.resultCategory?` ${this.state.testState?.resultCategory}`:""}" part="result-icon"></div>\n                <span class="test-description description">${this.state.description}</span>\n                ${null!=this.state.testState?.duration&&this.state.testState.duration>0?`<span class="test-duration duration">\n                        <span class="test-duration-value">${this.state.testState.duration>10?this.state.testState.duration.toFixed(0):this.state.testState.duration.toFixed(2)}</span>\n                        <span class="test-duration-unit">ms</span>\n                    </span>`:""}\n                <button type="button" class="run-test-button" part="run-test-button" title="Run Test"${1==this.state.isDisabled?" disabled":""}>\n                    <slot name="run-button-content">\n                        <slot name="run-button-icon"><svg class="icon arrow-icon run-button-icon"><use href="#icon-definition_arrow"></use></svg></slot>\n                        <slot name="run-button-label"><span class="run-button-label button-label label icon">Run Test</span></slot>\n                    </slot>\n                </button>\n            </summary>\n            <div class="results" part="results">\n                ${null==this.state.beforeEachState?"":`<details class="before-each-details hook${"none"==this.state.beforeEachState.resultCategory?"":` ${this.state.beforeEachState.resultCategory}`}${1==this.state.beforeEachState.isRunning?" running":""}" part="before-each-details hook">\n                        <summary class="before-each-summary" part="before-each-summary">\n                            <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\n                            <div class="before-each-result-icon result-icon${"none"!=this.state.beforeEachState.resultCategory?` ${this.state.beforeEachState.resultCategory}`:""}" part="before-each-result-icon"></div>\n                            <span class="before-each-description description hook-name">Before Each Hook</span>\n                        </summary>\n                        <div class="before-each-result result message" part="before-each-result result message">${"string"!=typeof this.state.beforeEachState.resultContent?"":this.state.beforeEachState.resultContent}</div>\n                    </details>`}\n                ${null==this.state.testState?"":null==this.state.beforeEachState&&null==this.state.afterEachState?`<div class="test-result result message" part="test-result result message">${"string"!=typeof this.state.testState.resultContent?"":this.state.testState.resultContent}</div>`:`<details class="processing-details${"none"==this.state.testState.resultCategory?"":` ${this.state.testState.resultCategory}`}${1==this.state.testState.isRunning?" running":""}" part="processing-details"${1==this.state.testState.hasRun?" open":""}>\n                        <summary class="processing-summary" part="processing-summary">\n                            <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\n                            <div class="processing-result-icon result-icon${"none"!=this.state.testState.resultCategory?` ${this.state.testState.resultCategory}`:""}" part="processing-result-icon result-icon"></div>\n                            <span class="processing-description description">Test</span>\n                        </summary>\n                        <div class="test-result result message" part="test-result result message">${"string"!=typeof this.state.testState.resultContent?"":this.state.testState.resultContent}</div>\n                    </details>`}                \n                ${null==this.state.afterEachState?"":`<details class="after-each-details hook${"none"==this.state.afterEachState.resultCategory?"":` ${this.state.afterEachState.resultCategory}`}${1==this.state.afterEachState.isRunning?" running":""}" part="after-each-detail hooks">\n                        <summary class="after-each-summary" part="after-each-summary">\n                            <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\n                            <div class="after-each-result-icon result-icon${"none"!=this.state.afterEachState.resultCategory?` ${this.state.afterEachState.resultCategory}`:""}" part="before-each-result-icon"></div>\n                            <span class="after-each-description description hook-name">After Each Hook</span>\n                        </summary>\n                        <div class="after-each-result result message" part="after-each-result result message">${"string"!=typeof this.state.afterEachState.resultContent?"":this.state.afterEachState.resultContent}</div>\n                    </details>`}\n            </div>\n        </details>`,this.dataset.testId=this.state.testId,this.classList.add("test"),this.part.add("test"),this.toggleAttribute("success","success"==this.resultCategory()),this.classList.toggle("success","success"==this.resultCategory()),this.part.toggle("success","success"==this.resultCategory()),this.classList.toggle("fail","fail"==this.resultCategory()),this.part.toggle("fail","fail"==this.resultCategory()),this.classList.toggle("running",this.isRunning()),this.part.toggle("running",this.isRunning()),this.state.beforeEachState?.resultContent instanceof HTMLElement&&this.querySelector(".before-each-result").append(this.state.beforeEachState.resultContent),this.state.testState?.resultContent instanceof HTMLElement&&this.querySelector(".test-result").append(this.state.testState.resultContent),this.state.afterEachState?.resultContent instanceof HTMLElement&&this.querySelector(".after-each-result").append(this.state.afterEachState.resultContent)}enable(){this.state.isDisabled=!1,this.findElement(".run-test-button").toggleAttribute("disabled",!1)}disable(){this.state.isDisabled=!0,this.findElement(".run-test-button").toggleAttribute("disabled",!0)}async runTest(e,s){if(null==this.state.testState?.test)return;let n;this.reset();let r={},a=0;try{if(0==e.shouldContinueRunningTests)throw new Error("Tests have been disabled from continuing to run.");if(0==this.dispatchEvent(new CustomEvent(t.BeforeTest,{bubbles:!0,cancelable:!0,composed:!0,detail:{testElement:this}})))throw new Error("Test has been prevented.");if(1==s.codeTestsElement.state.isCanceled)throw new Error("Testing has been canceled.");this.setTestStateProperties("testState",{isRunning:!0}),e.codeTestsElement.setState(e.codeTestsElement.state);const o=performance?.now()??Date.now();n=await this.state.testState.test(s);a=(performance?.now()??Date.now())-o,this.setTestStateProperties("testState",{isRunning:!1,hasRun:!0}),e.codeTestsElement.setState(e.codeTestsElement.state);const i=e.parseTestResult(n,!0);r={testState:{test:this.state.testState.test,resultContent:i.result,resultCategory:i.resultCategory,hasRun:this.state.testState.hasRun,isRunning:!1,duration:a}}}catch(t){const s=e.parseTestResult(n,!1,t);r={testState:{test:this.state.testState.test,resultContent:s.result,resultCategory:s.resultCategory,hasRun:this.state.testState.hasRun,isRunning:!1,duration:a}},console.error(t),e.shouldContinueRunningTests=!1}finally{this.setStateProperties({...r}),e.codeTestsElement.setState(e.codeTestsElement.state),this.dispatchEvent(new CustomEvent(t.AfterTest,{bubbles:!0,cancelable:!0,composed:!0,detail:{testElement:this}}))}}reset(){const t=null!=this.state.testState?{resultCategory:"none",resultContent:"",test:this.state.testState.test,hasRun:this.state.testState.hasRun,isRunning:this.state.testState.isRunning,duration:0}:void 0;null!=t&&this.setTestStateProperties("testState",t)}}null==customElements.get(e)&&customElements.define(e,s);const n=Symbol("No Test Defined");class r{codeTestsElement;constructor(t){this.codeTestsElement=t}async loadTests(t){if(null!=t)try{const{tests:e,hooks:s}=await this.#e(t),n=s[l.BeforeAll],r=s[l.AfterAll],a=s[l.BeforeEach],o=s[l.AfterEach],i=s[l.RequiredBeforeAny],c=s[l.RequiredAfterAny],u=null==n?void 0:{resultCategory:"none",resultContent:"",test:n,hasRun:!1,isRunning:!1,duration:0},d=null==r?void 0:{resultCategory:"none",resultContent:"",test:r,hasRun:!1,isRunning:!1,duration:0},h=null==a?void 0:{resultCategory:"none",resultContent:"",test:a,hasRun:!1,isRunning:!1,duration:0},f=null==o?void 0:{resultCategory:"none",resultContent:"",test:o,hasRun:!1,isRunning:!1,duration:0},p=null==i?void 0:{resultCategory:"none",resultContent:"",test:i,hasRun:!1,isRunning:!1,duration:0},g=null==c?void 0:{resultCategory:"none",resultContent:"",test:c,hasRun:!1,isRunning:!1,duration:0};this.codeTestsElement.state.beforeEachState=h,this.codeTestsElement.state.afterEachState=f;for(const[t,s]of Object.entries(e))this.#s(t,s);this.codeTestsElement.setStateProperties({beforeAllState:u,afterAllState:d,beforeEachState:h,afterEachState:f,requiredBeforeAnyState:p,requiredAfterAnyState:g,resetHook:s.reset,contextHook:s.context})}catch(t){console.error(t)}}async#e(t){const e=await this.#n(t),s=e.tests??e.default;if(null==s)throw new Error(`Unable to find tests definition in file at path: ${t}`);const n={},r=s[l.BeforeAll];null!=r&&(n[l.BeforeAll]=r,delete s[l.BeforeAll]);const a=s[l.AfterAll];null!=a&&(n[l.AfterAll]=a,delete s[l.AfterAll]);const o=s[l.BeforeEach];null!=o&&(n[l.BeforeEach]=o,delete s[l.BeforeEach]);const i=s[l.AfterEach];null!=i&&(n[l.AfterEach]=i,delete s[l.AfterEach]);const c=s[l.RequiredBeforeAny];null!=c&&(n[l.RequiredBeforeAny]=c,delete s[l.RequiredBeforeAny]);const u=s[l.RequiredAfterAny];null!=u&&(n[l.RequiredAfterAny]=u,delete s[l.RequiredAfterAny]);const d=s[l.Reset];null!=d&&(n[l.Reset]=d,delete s[l.Reset]);const h=s[l.Context];return null!=h&&(n[l.Context]=h,delete s[l.Context]),{tests:s,hooks:n}}async#n(t){const e=window.location.href.lastIndexOf("/"),s=1==(-1!=window.location.href.substring(e).indexOf("."))?window.location.href.substring(0,e+1):window.location.href,n=s+t.substring(0,t.lastIndexOf("/")+1),r=s+t;let a=await(await fetch(r)).text();a=a.replaceAll(/['"`](((\.\/)|(\.\.\/))+(.*))['"`]/g,`'${n}$1'`);const o=new File([a],t.substring(t.lastIndexOf("/")),{type:"text/javascript"}),i=URL.createObjectURL(o);return await import(i)}#s(t,e){const n=function(){const t=new Uint8Array(20);crypto.getRandomValues(t);const e=[].slice.apply(t).map(function(t){return String.fromCharCode(t)}).join("");return btoa(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}(),r=new s;return r.setStateProperties({testId:n,description:t,testState:{test:e,resultCategory:"none",resultContent:"",isRunning:!1,hasRun:!1,duration:0},beforeEachState:null==this.codeTestsElement.state.beforeEachState?void 0:{isRunning:this.codeTestsElement.state.beforeEachState.isRunning,hasRun:this.codeTestsElement.state.beforeEachState.hasRun,resultCategory:this.codeTestsElement.state.beforeEachState.resultCategory,resultContent:this.codeTestsElement.state.beforeEachState.resultContent,duration:0},afterEachState:null==this.codeTestsElement.state.afterEachState?void 0:{isRunning:this.codeTestsElement.state.afterEachState.isRunning,hasRun:this.codeTestsElement.state.afterEachState.hasRun,resultCategory:this.codeTestsElement.state.afterEachState.resultCategory,resultContent:this.codeTestsElement.state.afterEachState.resultContent,duration:0}}),this.codeTestsElement.findElement("#tests").append(r),n}shouldContinueRunningTests=!0;async runTests(e){if(0==this.codeTestsElement.dispatchEvent(new CustomEvent(t.BeforeAll,{bubbles:!0,composed:!0,cancelable:!0})))throw new Error("Tests have been prevented.");await this.codeTestsElement.reset();for(let t=0;t<e.length;t++)e[t].disable();const s=await this.createTestContext();if(await this.runHook("requiredBeforeAnyState",void 0,s),0==this.shouldContinueRunningTests)return void await this.#r(e,s);if(await this.runHook("beforeAllState",void 0,s),0==this.shouldContinueRunningTests)return void await this.#r(e,s);if(0==("false"!=this.codeTestsElement.getAttribute("ordered"))){const t=e.map(t=>this.runTest(t,!0,s));await Promise.all(t)}else for(let t=0;t<e.length;t++){const n=e[t];if(0==this.shouldContinueRunningTests)break;await this.runTest(n,!0,s)}0!=this.shouldContinueRunningTests?(await this.runHook("afterAllState",void 0,s),await this.#r(e,s)):await this.#r(e,s)}async#r(e,s){await this.runHook("requiredAfterAnyState",void 0,s);for(let t=0;t<e.length;t++)e[t].enable();this.codeTestsElement.dispatchEvent(new CustomEvent(t.AfterAll,{bubbles:!0,composed:!0}))}async runTest(t,e,s){if(null!=t){if(0==e){const t=this.codeTestsElement.findElements("code-test");for(let e=0;e<t.length;e++)t[e].disable()}s=s??await this.createTestContext(t),0!=e||(await this.runHook("requiredBeforeAnyState",void 0,s),0!=this.shouldContinueRunningTests)?(await this.runHook("beforeEachState",t,s),0!=this.shouldContinueRunningTests?(await t.runTest(this,s),0!=this.shouldContinueRunningTests?(await this.runHook("afterEachState",t,s),await this.#a(s,e)):await this.#a(s,e)):await this.#a(s,e)):await this.#a(s,e)}}async#a(t,e){if(1==e)return;await this.runHook("requiredAfterAnyState",void 0,t);const s=this.codeTestsElement.findElements("code-test");for(let t=0;t<s.length;t++)s[t].enable()}async runHook(e,s,r){const a=this.codeTestsElement.state[e];if(null==a)return n;if(1==this.codeTestsElement.state.isCanceled)return{success:!1,value:"Testing has been canceled."};let o;try{if(0==this.shouldContinueRunningTests&&("requiredAfterAnyState"!=e||"error"==this.codeTestsElement.getAttribute("required-after")))throw new Error("Tests have been disabled from continuing to run.");null!=s&&s.setTestStateProperties(e,{isRunning:!0}),this.codeTestsElement.setTestStateProperties(e,{isRunning:!0}),o=await a.test(r),null!=s&&s.setTestStateProperties(e,{isRunning:!1,hasRun:!0}),this.codeTestsElement.setTestStateProperties(e,{isRunning:!1,hasRun:!0});const t=this.parseTestResult(o,!0,void 0);null!=s&&s.setTestStateProperties(e,{resultCategory:t.resultCategory,resultContent:t.result}),this.codeTestsElement.setTestStateProperties(e,{resultCategory:t.resultCategory,resultContent:t.result})}catch(t){console.error(t),this.shouldContinueRunningTests=!1,o={success:!1,value:`Failed: ${t.message}`};const n=this.parseTestResult(o,!1,t);null!=s&&s.setTestStateProperties(e,{isRunning:!1,hasRun:!0,resultContent:n.result,resultCategory:n.resultCategory}),this.codeTestsElement.setTestStateProperties(e,{isRunning:!1,hasRun:!0,resultCategory:n.resultCategory,resultContent:n.result})}finally{return this.codeTestsElement.dispatchEvent(new CustomEvent(t.AfterHook,{bubbles:!0,composed:!0,detail:o})),o}}parseTestResult(t,e,s){if(t==n)return{result:"",resultCategory:"none"};if(null==t){const t=1==e?"success-message":"error-message";return{result:`<code class="code" part="code">\n                    <pre class="pre ${t}" part="pre ${t}">${1==e?"Passed":"Failed"+(null!=s?`:\n${s.message}`:"")}</pre>\n                </code>`,resultCategory:1==e?"success":"fail"}}if("function"==typeof t)return console.log("function"),{result:"[A function was returned]",resultCategory:"none"};if(t instanceof HTMLElement||"string"==typeof t)return{result:t,resultCategory:"none"};if("object"==typeof t){const s=t,n=1==e?"success-message":"error-message";if(null!=s.success&&null!=s.expected&&null!=s.value)return{result:`<code class="code" part="code">\n                        <pre class="pre ${n}" part="pre ${n}">${1==s.success?"Passed":"Failed"}\nExpected:${s.expected}\nResult:${s.value}</pre>\n                    </code>`,resultCategory:1==s.success?"success":"fail"};if(null!=s.success)return{result:`<code class="code" part="code">\n                        <pre class="pre ${n}" part="pre ${n}">${JSON.stringify(t,void 0,2)}</pre>\n                    </code>`,resultCategory:1==s.success?"success":"fail"};{const s=1==e?"success-message":"error-message";return{result:`<code class="code" part="code">\n                        <pre class="pre ${s}" part="pre ${s}">${JSON.stringify(t,void 0,2)}</pre>\n                    </code>`,resultCategory:1==e?"success":"fail"}}}throw new Error("Unable to parse result type: Unknown result type")}async createTestContext(e){const s={detail:{},codeTestsElement:this.codeTestsElement,testElement:e,messageElement:e?.findElement(".message")};return null!=this.codeTestsElement.state.contextHook&&await this.codeTestsElement.state.contextHook(s),this.codeTestsElement.dispatchEvent(new CustomEvent(t.Context,{bubbles:!0,composed:!0,detail:{context:s}})),s}}class a extends Promise{async toBeDefined(t){if(null==await(this))throw new Error(`${null!=t?t:"Value"} is undefined`)}async toBe(t,e=!1){const s=await(this);if(0==(1==e?s===t:s==t))throw new Error(`  Value is not equal.\n  Expected: ${t}\n  Result: ${s}`)}async toContainText(t){const e=await(this);return e instanceof HTMLElement?{success:e.textContent.includes(t),index:e.textContent.indexOf(t)}:"string"==typeof e&&{success:e.includes(t),index:e.indexOf(t)}}async toHaveAttribute(t){const e=await(this);if(!(e instanceof HTMLElement))throw new Error("Unable to check for attribute on non-HTMLElement target");if(e.getAttribute(t))throw new Error("Target does not have attribute")}}const o=":not(slot,defs,g,rect,path,circle,ellipse,line,polygon,text,tspan,use,svg image,svg title,desc,template,template *)";function i(t){!function(t){const e=[...t.querySelectorAll(`${o}[id]`)];for(let t=0;t<e.length;t++)e[t].part.add(e[t].id)}(t),function(t){const e=[...t.querySelectorAll(`${o}[class]`)];for(let t=0;t<e.length;t++)e[t].part.add(...e[t].classList)}(t)}const l={BeforeAll:"beforeall",AfterAll:"afterall",BeforeEach:"beforeeach",AfterEach:"aftereach",RequiredBeforeAny:"requiredbeforeany",RequiredAfterAny:"requiredafterany",Reset:"reset",Context:"context"},c=new CSSStyleSheet;c.replaceSync(":host\r\n{\r\n    --gap: 7px;\r\n    --gap-small: 3px;\r\n    --gap-medium: 14px;\r\n    --gap-large: 24px;\r\n    \r\n    --surface-success: oklch(93.96% 0.05 148.74);\r\n    --primary-success: oklch(58.83% 0.158 145.05);\r\n    --border-success: solid 1px var(--primary-success);\r\n\r\n    --surface-fail: oklch(88.98% 0.052 3.28);\r\n    --primary-fail: oklch(45.8% 0.177 17.7);\r\n    --border-fail: solid 1px var(--primary-fail);\r\n\r\n    --surface-process: oklch(89.66% 0.046 260.67);\r\n    --primary-process: oklch(43.48% 0.17 260.2);\r\n    --border-process: solid 1px var(--primary-process);\r\n\r\n\r\n\r\n    --surface-test-summary: var(--uchu-gray);\r\n    --surface-hook-summary: var(--uchu-light-purple);\r\n    --surface-hook-any-summary: var(--uchu-light-blue);\r\n    \r\n    --border-test: solid 1px var(--uchu-dark-gray);\r\n    --border-hook: solid 1px var(--uchu-dark-purple);\r\n    --border-hook-any: solid 1px var(--uchu-dark-blue);\r\n    --border-button: solid 1px var(--uchu-blue);\r\n    \r\n    --success-icon: url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path fill=\"%232e943a\" d=\"M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z\"/></svg>');\r\n    --info-icon: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2022.812714%2022.814663%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20style%3D%22fill%3Atransparent%3Bstroke%3Atransparent%3Bstroke-width%3A0.999999%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dasharray%3Anone%3Bstroke-dashoffset%3A29.2913%3Bstroke-opacity%3A1%22%20d%3D%22M%2022.295505%2C11.407332%20A%2010.889144%2C10.889144%200%200%201%2011.406424%2C22.296479%2010.889144%2C10.889144%200%200%201%200.51720881%2C11.407332%2010.889144%2C10.889144%200%200%201%2011.406424%2C0.51818382%2010.889144%2C10.889144%200%200%201%2022.295505%2C11.407332%20Z%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22m%2013.945668%2C4.3053761%20c%200.150778%2C-0.96462%20-0.30687%2C-1.43709%20-1.36997%2C-1.43709%20-1.063%2C0%20-1.668452%2C0.47247%20-1.81923%2C1.43709%20-0.150779%2C0.96462%200.306971%2C1.43708%201.369971%2C1.43708%201.004%2C0%201.66845%2C-0.47246%201.819229%2C-1.43708%20z%20M%2011.693889%2C17.829726%2013.373994%2C7.0811161%20h%20-2.9333%20L%208.7605887%2C17.829726%20Z%22%20style%3D%22font-size%3A19.6861px%3Bfont-family%3APassageway%3B-inkscape-font-specification%3APassageway%3Bfill%3A%23a30d30%3Bstroke-width%3A2.5%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dashoffset%3A29.2913%22%20aria-label%3D%22i%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E');\r\n\r\n\r\n    display: grid;\r\n    gap: var(--gap);\r\n    grid-auto-rows: max-content;\r\n    font-family: sans-serif;\r\n    font-size: 12px;\r\n}\r\n\r\n#header\r\n{\r\n    flex: 1;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: var(--gap);\r\n    padding: var(--gap-small) var(--gap);\r\n}\r\n#title\r\n{\r\n    flex: 1;\r\n}\r\n\r\n#tests\r\n,#component-content\r\n{\r\n    display: grid;\r\n    gap: var(--gap);\r\n    grid-auto-rows: max-content;\r\n}\r\n\r\n#header button\r\n{\r\n    align-self: stretch;\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: var(--gap-small);\r\n}\r\n\r\nbutton .reset-icon\r\n{\r\n    width: 1em;\r\n    height: 1em;\r\n    transform: scaleX(-1);\r\n    margin-inline: 3px;\r\n}\r\n\r\n/* Run button */\r\nbutton .arrow-icon\r\n{\r\n    width: .75em;\r\n    height: .75em;\r\n    transform: rotate(-90deg);\r\n    margin-inline: 3px;\r\n}\r\n:host(.running) .run-all-button-icon\r\n,:host(.fail) .run-all-button-icon\r\n{\r\n    transform: rotate(0);\r\n}\r\n\r\n/* Dropdown Layout */\r\nsummary > .run-test-button\r\n, #run-all-button\r\n{\r\n    justify-self: flex-end;\r\n    margin-left: auto;\r\n}\r\n\r\nsummary:not(#component-summary)\r\n{\r\n    padding: var(--gap-small) var(--gap);\r\n}\r\n#component-summary\r\n{\r\n    padding-block: var(--gap-small);\r\n}\r\n\r\n\r\n/* Dropdown Markers */\r\nsummary\r\n{\r\n    display: flex;\r\n    align-items: center;\r\n    gap: var(--gap);\r\n}\r\nsummary > .arrow-icon\r\n{\r\n    background: var(--arrow-icon);\r\n    transform: rotate(-90deg);\r\n    transition: transform ease-out 90ms;\r\n    width: .6em;\r\n    height: .6em;\r\n}\r\ndetails[open] > summary > .arrow-icon\r\n{\r\n    transform: rotate(0);\r\n}\r\n\r\n/* Result Icon */\r\n.result-icon\r\n{\r\n    --background-size: 16px;\r\n    width: var(--background-size);\r\n    height: var(--background-size);\r\n\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n\r\n    border: solid 1px currentColor;\r\n    border-radius: 50%;\r\n}\r\n.result-icon::before\r\n{\r\n    content: 'â‹¯';\r\n    font-size: 10px;\r\n}\r\n\r\n:host(.running) #component-summary .result-icon\r\n,.test.running .test-summary > .result-icon\r\n,.hook.running .result-icon\r\n,.processing-details.running .processing-result-icon\r\n{\r\n    border: var(--border-process);\r\n    background: var(--surface-process);\r\n}\r\n:host(.success) #component-summary .result-icon\r\n,.test.success .test-summary > .result-icon\r\n,.hook.success .result-icon\r\n,.processing-details.success .processing-result-icon\r\n{\r\n    border: var(--border-success);\r\n    background: var(--surface-success)\r\n    var(--success-icon);\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    background-size: var(--icon-size, 12px) var(--icon-size, 12px);\r\n}\r\n:host(.fail) #component-summary .result-icon\r\n,.test.fail .test-summary > .result-icon\r\n,.hook.fail .result-icon\r\n,.processing-details.fail .processing-result-icon\r\n{\r\n    border: var(--border-fail);\r\n    background: var(--surface-fail)\r\n    var(--info-icon);\r\n    background-size: var(--icon-size, 16px) var(--icon-size, 16px);\r\n    background-repeat: no-repeat;\r\n    background-position: center;\r\n    transform: rotate(175deg);\r\n}\r\n:host(:is(.success,.fail)) #component-summary .result-icon::before\r\n,.test:is(.success,.fail) .test-summary > .result-icon::before\r\n,.hook:is(.success,.fail) .result-icon::before\r\n,.processing-details:is(.success,.fail) .processing-result-icon::before\r\n{\r\n    display: none;\r\n}\r\n:host(.running) #component-summary .result-icon::before\r\n,.test:is(.running) .test-summary > .result-icon::before\r\n,.hook:is(.running) .result-icon::before\r\n,.processing-details:is(.running) .processing-result-icon::before\r\n{\r\n    content: '';\r\n    --color: var(--primary-process, currentColor);\r\n    --animation-timing-function: linear;\r\n    --animation-duration: 2s;\r\n    width: var(--icon-size, 14px);\r\n    height: var(--icon-size, 14px);\r\n    mask-image: radial-gradient(circle at 50% 50%, transparent calc(var(--icon-size, 14px) / 3), black calc(var(--icon-size, 14px) / 3));\r\n    background-image: conic-gradient(transparent, transparent 135deg, var(--color));\r\n    border-radius: 50%;\r\n    animation: var(--animation-timing-function) var(--animation-duration) infinite spin;\r\n    margin: 2px;\r\n}\r\n\r\n/* Smaller Result icon settings for sub-test icons */\r\n.before-each-result-icon\r\n,.after-each-result-icon\r\n,.processing-result-icon\r\n{\r\n    --background-size: 12px;\r\n}\r\n.before-each-result-icon::before\r\n,.after-each-result-icon::before\r\n,.processing-result-icon::before\r\n{\r\n    font-size: 9px;\r\n}\r\n.hook.success .before-each-result-icon\r\n,.hook.success .after-each-result-icon\r\n,.processing-details.success .processing-result-icon\r\n{\r\n    --icon-size: 8px;\r\n}\r\n.hook.fail .before-each-result-icon\r\n,.hook.fail .after-each-result-icon\r\n,.processing-details.fail .processing-result-icon\r\n{\r\n    --icon-size: 12px;\r\n}\r\n.hook:is(.running) .before-each-result-icon::before\r\n,.hook:is(.running) .after-each-result-icon::before\r\n,.processing-details:is(.running) .processing-result-icon::before\r\n{\r\n    --icon-size: 9px;\r\n}\r\n\r\n/* Hook Display */\r\n.hook\r\n{\r\n    display: none;\r\n}\r\n:host(.has-before-all-hook) #before-all-details\r\n,:host(.has-after-all-hook) #after-all-details\r\n{\r\n    display: initial;\r\n}\r\n:host(.has-before-each-hook) .before-each-details\r\n,:host(.has-after-each-hook) .after-each-details\r\n{\r\n    display: initial;\r\n}\r\n:host(.has-required-before-hook) #required-before-any-details\r\n,:host(.has-required-after-hook) #required-after-any-details\r\n{\r\n    display: initial;\r\n}\r\n\r\n/* Test Display */\r\ncode-test .results\r\n{\r\n    display: grid;\r\n    gap: var(--gap-small);\r\n    padding-inline-start: 1em;\r\n}\r\n\r\ncode-test .results details .result\r\n,.hook > .results\r\n{\r\n    margin-inline-start: 1em;\r\n}\r\n\r\n.result.message:empty\r\n{\r\n    padding: .5em 1em;\r\n}\r\n.result.message:empty::before\r\n{\r\n    content: '[ this function has not been run ]';\r\n    font-family: monospace;\r\n    font-size: 12px;\r\n    font-style: italic;\r\n}\r\n\r\n/* Ordered Display */\r\n#tests\r\n{\r\n    counter-reset: tests;\r\n}\r\ncode-test\r\n{\r\n    counter-increment: tests;\r\n}\r\ncode-test > details > summary > .description\r\n{\r\n    flex: 1;\r\n}\r\n:host(:not([ordered=\"false\"])) code-test > details > summary > .description::before\r\n{\r\n    content: counter(tests) \". \";\r\n}\r\n\r\n/* Hook Name */\r\n.hook-name,.processing-description\r\n{\r\n    border-radius: 3px;\r\n    border: solid 1px;\r\n    /* background: rgb(0 0 0 / .2); */\r\n    font-family: monospace;\r\n    text-transform: uppercase;\r\n    font-size: 11px;\r\n    padding: 3px 7px;\r\n}\r\n\r\n#footer\r\n{\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n#group-results\r\n{\r\n    display: flex;\r\n    gap: var(--gap);\r\n    padding: var(--gap);\r\n}\r\n\r\n#passed-total-percent::before\r\n{\r\n    content: '(';\r\n}\r\n#passed-total-percent::after\r\n{\r\n    content: ')';\r\n}\r\n\r\n@keyframes spin\r\n{\r\n    from { transform: rotate(0deg); }\r\n    to { transform: rotate(360deg); }\r\n}");const u="code-tests";class d extends HTMLElement{state={isCanceled:!1,beforeAllState:void 0,afterAllState:void 0,beforeEachState:void 0,afterEachState:void 0,requiredBeforeAnyState:void 0,requiredAfterAnyState:void 0,resetHook:void 0,contextHook:void 0};setState(t){this.state=t,this.#t()}setStateProperties(t){this.setState({...this.state,...t})}setTestStateProperties(t,e){null!=this.state[t]&&this.setState({...this.state,[t]:{...this.state[t],...e}})}findElement(t){return this.shadowRoot.querySelector(t)}findElements(t){return Array.from(this.shadowRoot.querySelectorAll(t))}getIsRunning(){return 1==(null!=this.findElements("code-test").find(t=>1==t.isRunning()))||1==this.state.requiredBeforeAnyState?.isRunning||1==this.state.requiredAfterAnyState?.isRunning||1==this.state.beforeAllState?.isRunning||1==this.state.afterAllState?.isRunning}getResultCategory(){const t=this.findElements("code-test").reduce((t,e,s)=>{const n=e.resultCategory();return"fail"==t||"fail"==n?"fail":"success"!=t&&""!=t||"success"!=n?"none":"success"},""),e=[this.state.requiredBeforeAnyState,this.state.requiredAfterAnyState,this.state.beforeAllState,this.state.afterAllState].reduce((t,e,s)=>{if(null==e)return null;const n=e?.resultCategory;return"fail"==t||"fail"==n?"fail":"success"!=t&&""!=t||"success"!=n?"none":"success"},"");return"none"==t&&null==e?"none":"fail"==t||"fail"==e?"fail":"success"==t&&"success"==e?"success":"none"}#o;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='<details id="component-details" class="details">\r\n    <summary id="component-summary" class="summary">\r\n        <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\r\n        <slot name="header">\r\n            <header id="header">\r\n                <span id="component-result-icon" class="result-icon"></span>\r\n                <span id="title"><slot name="title"><span id="title-text">Tests</span></slot></span>\r\n                <slot name="reload-button">\r\n                    <button type="button" id="reload-button" title="Reload">\r\n                        <slot name="reload-button-content">\r\n                            <slot name="reload-button-icon"><svg class="icon reset-icon reload-button-icon"><use href="#icon-definition_reset"></use></svg></slot>\r\n                            <slot name="reload-button-label"><span class="reload-button-label button-label label icon">Reload</span></slot>\r\n                        </slot>\r\n                    </button>\r\n                </slot>\r\n                <slot name="run-all-button">\r\n                    <button type="button" id="run-all-button" title="Run All Tests">\r\n                        <slot name="run-all-button-content">\r\n                            <slot name="run-all-button-icon"><svg class="icon arrow-icon run-button-icon run-all-button-icon"><use href="#icon-definition_arrow"></use></svg></slot>\r\n                            <slot name="run-all-button-label"><span class="run-all-button-label run-button-label button-label label icon">Run Tests</span></slot>\r\n                        </slot>\r\n                    </button>\r\n                </slot>\r\n                <slot name="header-details"></slot>\r\n            </header>\r\n        </slot>\r\n    </summary>\r\n    <div id="component-content" class="content">\r\n        <details id="required-before-any-details" class="hook">\r\n            <summary id="required-before-any-summary">\r\n                <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\r\n                <span id="required-before-any-result-icon" class="result-icon"></span>\r\n                <span id="required-before-any-description" class="description hook-name">Required Before Any Hook</span>\r\n            </summary>\r\n            <div class="results">\r\n                <div id="required-before-any-results" class="result message"></div>\r\n            </div>\r\n        </details>\r\n        <details id="before-all-details" class="hook">\r\n            <summary id="before-all-summary">\r\n                <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\r\n                <span id="before-all-result-icon" class="result-icon"></span>\r\n                <span id="before-all-description" class="description hook-name">Before All Hook</span>\r\n            </summary>\r\n            <div class="results">\r\n                <div id="before-all-results" class="result message"></div>\r\n            </div>\r\n        </details>\r\n        <div id="tests"></div>\r\n        <details id="after-all-details" class="hook">\r\n            <summary id="after-all-summary">\r\n                <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\r\n                <span id="after-all-result-icon" class="result-icon"></span>\r\n                <span id="after-all-description" class="description hook-name">After All Hook</span>\r\n            </summary>\r\n            <div class="results">\r\n                <div id="after-all-results" class="result message"></div>\r\n            </div>\r\n        </details>\r\n        <details id="required-after-any-details" class="hook">\r\n            <summary id="required-after-any-summary">\r\n                <svg class="icon arrow-icon"><use href="#icon-definition_arrow"></use></svg>\r\n                <span id="required-after-any-result-icon" class="result-icon"></span>\r\n                <span id="required-after-any-description" class="description hook-name">Required After Any Hook</span>\r\n            </summary>\r\n            <div class="results">\r\n                <div id="required-after-any-results" class="result message"></div>\r\n            </div>\r\n        </details>\r\n    </div>\r\n    \r\n    <slot name="footer">\r\n        <foooter id="footer">\r\n            <span id="group-results">\r\n                <span id="duration">\r\n                    <span id="duration-label">Duration</span>\r\n                    <span id="duration-value"></span>\r\n                    <span id="duration-unit">ms</span>\r\n                </span>\r\n                <span id="results-progress">\r\n                    <progress id="results-progress-value"></progress>\r\n                </span>\r\n                <span id="passed-total-pair">\r\n                    <span id="total-tests-passed-value"></span>\r\n                    <span id="passed-total-delimiter">of</span>\r\n                    <span id="total-tests-count-value"></span>\r\n                    <span id="total-tests-passed-label">Passed</span>\r\n                </span>\r\n                <span id="passed-total-percent">\r\n                    <span id="passed-total-percent-value"></span>\r\n                    <span id="passed-total-percent-label">%</span>\r\n                </span>\r\n            </span>\r\n        </foooter>\r\n    </slot>\r\n</details>\r\n<template id="prompt-template">\r\n    <div class="prompt">\r\n        <div class="prompt-display">\r\n            <span class="icon prompt-icon"></span>\r\n            <span class="label prompt-label"></span>\r\n        </div>\r\n        <div class="prompt-actions">\r\n            <button class="prompt-button accept" type="button">Accept</button>\r\n            <button class="prompt-button reject" type="button">Reject</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n<div id="icon-definitions" style="display: none;">\r\n    <svg id="icon-definition_arrow" viewBox="0 0 8 8" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\r\n        <path d="m3.26,6.81l-2.93,-4.69c-0.37,-0.58 0.05,-1.34 0.74,-1.34l5.87,0c0.69,0 1.11,0.76 0.74,1.34l-2.93,4.69c-0.35,0.55 -1.14,0.55 -1.49,0z" fill="var(--fill-color, currentcolor)" />\r\n    </svg>\r\n    <svg id="icon-definition_reset" class="icon reset" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\r\n        <path\r\n            style="fill:var(--fill-color, currentcolor);stroke-linecap:round;stroke-linejoin:round;-inkscape-stroke:none;paint-order:markers stroke fill"\r\n            d="M 5.484375 0.43359375 A 1.5224222 1.5224222 0 0 0 4.2558594 1.2011719 L 0.99804688 6.9453125 A 1.5224222 1.5224222 0 0 0 2.5488281 9.2011719 L 9.34375 8.171875 A 1.5224222 1.5224222 0 0 0 10.332031 5.7539062 L 9.4746094 4.6113281 C 11.949333 3.8016718 14.718209 4.258351 16.822266 5.9570312 C 19.510764 8.1275534 20.456787 11.785479 19.160156 14.988281 C 17.863527 18.191083 14.6405 20.15873 11.199219 19.847656 C 7.7579362 19.536584 4.9376009 17.022073 4.2363281 13.638672 A 1.5 1.5 0 0 0 2.4628906 12.474609 A 1.5 1.5 0 0 0 1.2988281 14.248047 C 2.2656928 18.912838 6.1831413 22.407052 10.927734 22.835938 C 15.672328 23.264824 20.153706 20.531029 21.941406 16.115234 C 23.729107 11.699441 22.413741 6.6156073 18.707031 3.6230469 C 16.853677 2.1267667 14.61485 1.3255701 12.347656 1.2324219 C 10.738216 1.1662975 9.1150542 1.4598646 7.6035156 2.1132812 L 6.7988281 1.0390625 A 1.5224222 1.5224222 0 0 0 5.484375 0.43359375 z " />\r\n    </svg>\r\n    <svg id="icon-definition_cancel" class="icon cancel" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg">\r\n    <path\r\n        style="fill:var(--fill-color, currentcolor);stroke-linecap:round;stroke-linejoin:round;-inkscape-stroke:none;paint-order:markers stroke fill"\r\n        d="M -7.063234 9.5244002 C -5.8135728 7.6769245 -5.0820528 5.453265 -5.0820528 3.0633809 C -5.0820529 -3.3096433 -10.278145 -8.5098163 -16.65117 -8.5098163 C -23.024193 -8.5098163 -28.22385 -3.3110105 -28.22385 3.0620137 C -28.22385 9.4350379 -23.025043 14.634694 -16.65202 14.634694 C -12.668879 14.634694 -9.1460028 12.603526 -7.063234 9.5244002 z M -9.5406311 7.8637601 C -11.076991 10.143147 -13.683157 11.63463 -16.652974 11.63463 C -19.960499 11.63463 -22.814085 9.782061 -24.244824 7.0543029 L -24.236684 7.0527515 L -8.1332524 3.983715 L -8.1305391 3.9831979 C -8.2815631 5.4121635 -8.7798709 6.7350751 -9.5406311 7.8637601 z M -9.0610781 -0.92890828 L -9.069218 -0.92735695 L -25.17265 2.1416796 L -25.175363 2.1421967 C -24.719122 -2.1725739 -21.093311 -5.5092358 -16.652928 -5.5092358 C -13.345403 -5.5092358 -10.491243 -3.6566663 -9.0610781 -0.92890828 z "\r\n        transform="rotate(-124.20981)" />\r\n    </svg>\r\n</div>',this.shadowRoot.adoptedStyleSheets.push(c)}connectedCallback(){this.#i()}disconnectedCallback(){this.#l()}#c=!1;async#i(){1!=this.#c&&(i(this.shadowRoot),this.addEventListener("click",this.#u),await new Promise(t=>requestAnimationFrame(()=>{this.#o=new r(this),t()})),this.#c=!0,"false"!=this.getAttribute("auto")&&this.reloadTests())}#l(){this.removeEventListener("click",this.#u)}#u=this.#d.bind(this);#d(t){if(null!=t.composedPath().find(t=>t instanceof HTMLButtonElement&&"run-all-button"==t.id))return void(this.classList.contains("running")?this.cancel():this.classList.contains("fail")||this.classList.contains("success")?this.reset():this.runTests());null!=t.composedPath().find(t=>t instanceof HTMLButtonElement&&"reload-button"==t.id)&&this.reloadTests();const e=t.composedPath().find(t=>t instanceof HTMLButtonElement&&t.classList.contains("run-test-button"));if(null==e)return;const s=e.closest("code-test")??void 0;this.#o.runTest(s,!1)}#h(){return this.getAttribute("src")??this.getAttribute("test")??this.getAttribute("tests")??this.getAttribute("run")??this.getAttribute("path")??void 0}#t(){const t=this.getIsRunning(),e=this.getResultCategory(),s=null!=this.state.beforeAllState,n=null!=this.state.beforeEachState,r=null!=this.state.requiredAfterAnyState,a=null!=this.state.beforeAllState,o=null!=this.state.beforeEachState,i=null!=this.state.requiredAfterAnyState,l=1==r||1==s||1==n,c=1==i||1==a||1==o;this.classList.toggle("canceled",this.state.isCanceled),this.part.toggle("canceled",this.state.isCanceled),this.classList.toggle("running",1==t),this.part.toggle("running",1==t),this.toggleAttribute("success","success"==e),this.classList.toggle("success","success"==e),this.part.toggle("success","success"==e),this.classList.toggle("fail","fail"==e),this.part.toggle("fail","fail"==e),this.classList.toggle("has-before-hook",l),this.part.toggle("has-before-hook",l),this.classList.toggle("has-after-hook",c),this.part.toggle("has-after-hook",c),this.classList.toggle("has-before-all-hook",s),this.part.toggle("has-before-all-hook",s),this.classList.toggle("has-after-all-hook",a),this.part.toggle("has-after-all-hook",a),this.classList.toggle("has-before-each-hook",n),this.part.toggle("has-before-each-hook",n),this.classList.toggle("has-after-each-hook",o),this.part.toggle("has-after-each-hook",o),this.classList.toggle("has-required-before-hook",r),this.part.toggle("has-required-before-hook",r),this.classList.toggle("has-required-after-hook",i),this.part.toggle("has-required-after-hook",i);const u=this.findElement(".run-all-button-label");null!=u&&(u.textContent=1==t?"Cancel":"fail"==e?"Reset":"Run Tests",u.title=1==t?"Cancel the testing":"fail"==e?"Reset the tests so they can be run again":"Run the tests");const d=this.findElement(".run-all-button-icon");null!=d&&(d.innerHTML=1==t?'<use href="#icon-definition_cancel"></use>':"fail"==e?'<use href="#icon-definition_reset"></use>':'<use href="#icon-definition_arrow"></use>'),this.#f(this.state.beforeAllState,"#before-all-results"),this.#f(this.state.afterAllState,"#after-all-results"),this.#f(this.state.requiredBeforeAnyState,"#required-before-any-results"),this.#f(this.state.requiredAfterAnyState,"#required-after-any-results");const h=this.findElement("#title");null!=h&&(h.textContent=this.getAttribute("label")??"Tests"),this.#p()}#f(t,e){const s=this.findElement(e);t?.resultContent instanceof HTMLElement?s.append(t.resultContent):"string"==typeof t?.resultContent&&(s.innerHTML=t.resultContent);const n=s.closest("details");n.toggleAttribute("open",null!=t&&"none"!=t.resultCategory),n.classList.toggle("running",1==t?.isRunning),n.part.toggle("running",1==t?.isRunning),n.toggleAttribute("success","success"==t?.resultCategory),n.classList.toggle("success","success"==t?.resultCategory),n.part.toggle("success","success"==t?.resultCategory),n.classList.toggle("fail","fail"==t?.resultCategory),n.part.toggle("fail","fail"==t?.resultCategory)}#p(){const t=this.collectTestResults(),e=this.findElement("#results-progress-value");null!=e&&(e.max=t.totalTests,e.value=t.totalPassed);const s=this.findElement("#total-tests-passed-value");null!=s&&(s.textContent=t.totalPassed.toString());const n=this.findElement("#total-tests-count-value");null!=n&&(n.textContent=t.totalTests.toString());const r=this.findElement("#passed-total-percent-value");null!=r&&(r.textContent=t.totalPercentage.toFixed(1));const a=this.findElement("#duration-value");null!=a&&(a.textContent=t.duration>10?t.duration.toFixed(0):t.duration.toFixed(2))}collectTestResults(){const t=this.findElements("code-test"),e=t.length,s=t.filter(t=>"success"==t.state.testState?.resultCategory).length;return{totalTests:e,totalPassed:s,totalPercentage:0==e?0:s/e*100,duration:t.reduce((t,e,s)=>t+(e.state.testState?.duration??0),0)}}async runTests(){const t=this.findElements("code-test");return this.#o.runTests(t)}async reloadTests(){this.findElement("#tests").innerHTML="",await this.reset();const t=this.#h();this.#o.loadTests(t)}async reset(){const e=this.findElements("code-test");for(let t=0;t<e.length;t++){const s=e[t],n=null!=this.state.beforeEachState?{resultCategory:"none",resultContent:"",hasRun:this.state.beforeEachState.hasRun,isRunning:this.state.beforeEachState.isRunning,duration:0}:void 0,r=null!=this.state.afterEachState?{resultCategory:"none",resultContent:"",hasRun:this.state.afterEachState.hasRun,isRunning:this.state.afterEachState.isRunning,duration:0}:void 0;null!=n&&(s.state.beforeEachState=n),null!=r&&(s.state.afterEachState=r),s.reset()}const s=null==this.state.beforeAllState?void 0:{resultContent:"",resultCategory:"none",test:this.state.beforeAllState.test,isRunning:!1,hasRun:!1,duration:0},n=null==this.state.afterAllState?void 0:{resultContent:"",resultCategory:"none",test:this.state.afterAllState.test,isRunning:!1,hasRun:!1,duration:0},r=null==this.state.beforeEachState?void 0:{resultContent:"",resultCategory:"none",test:this.state.beforeEachState.test,isRunning:!1,hasRun:!1,duration:0},a=null==this.state.afterEachState?void 0:{resultContent:"",resultCategory:"none",test:this.state.afterEachState.test,isRunning:!1,hasRun:!1,duration:0},o=null==this.state.requiredBeforeAnyState?void 0:{resultContent:"",resultCategory:"none",test:this.state.requiredBeforeAnyState.test,isRunning:!1,hasRun:!1,duration:0},i=null==this.state.requiredAfterAnyState?void 0:{resultContent:"",resultCategory:"none",test:this.state.requiredAfterAnyState.test,isRunning:!1,hasRun:!1,duration:0};this.setStateProperties({isCanceled:!1,beforeAllState:s,afterAllState:n,beforeEachState:r,afterEachState:a,requiredAfterAnyState:i,requiredBeforeAnyState:o}),this.#o.shouldContinueRunningTests=!0,null!=this.state.resetHook&&await this.state.resetHook(await this.#o.createTestContext()),this.dispatchEvent(new CustomEvent(t.Reset,{bubbles:!0,composed:!0}))}cancel(){this.state.isCanceled=!0,this.#o.shouldContinueRunningTests=!1,this.classList.add("canceled"),this.part.add("canceled"),this.dispatchEvent(new CustomEvent(t.Cancel,{bubbles:!0,composed:!0}))}static observedAttributes=["open","label"];attributeChangedCallback(t,e,s){if("open"==t)this.findElement("#component-details").toggleAttribute("open",null!=s);else if("label"==t){const t=this.findElement("#title");null!=t&&(t.textContent=s??"Tests")}}}function h(t){return new a(async(e,s)=>{if(t instanceof Promise){return void e(await t)}e(t)})}async function f(t,e,s,n){return new Promise((r,a)=>{const o=p(t.querySelector(".prompt-template")??t.findElement("#prompt-template"));o.querySelector(".label").textContent=s;const i=t=>{const e=t.composedPath();if(null!=e.find(t=>t instanceof HTMLButtonElement&&t.classList.contains("accept"))){const t=n?.onAccept?.()??!0;return o.removeEventListener("click",i),void r(t)}if(null!=e.find(t=>t instanceof HTMLButtonElement&&t.classList.contains("reject"))){const t=n?.onReject?.()??!1;return o.removeEventListener("click",i),void r(t)}};o.addEventListener("click",i),null!=n?.acceptLabel&&(o.querySelector(".accept").textContent=n.acceptLabel),null!=n?.rejectLabel&&(o.querySelector(".reject").textContent=n.rejectLabel),e.append(o)})}function p(t,e){const s=t instanceof HTMLTemplateElement?t:document.querySelector(t);if(null==s)throw new Error(`Unable to find template element from selector: ${t}`);const n=s.content.cloneNode(!0).firstElementChild;if(null==n)throw new Error("Unable to find first child of template element");return e?.append(n),n}null==customElements.get(u)&&customElements.define(u,d);export{s as CodeTestElement,t as CodeTestEvent,d as CodeTestsElement,l as Hook,a as TestPromise,p as createElementFromTemplate,h as expect,f as prompt};
