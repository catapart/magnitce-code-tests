var w=`:host\r
{\r
    /*** gray ***/\r
    --uchu-light-gray-raw: 95.57% 0.003 286.35;\r
    --uchu-light-gray: oklch(var(--uchu-light-gray-raw));\r
\r
    --uchu-gray-raw: 84.68% 0.002 197.12;\r
    --uchu-gray: oklch(var(--uchu-gray-raw));\r
\r
    --uchu-dark-gray-raw: 63.12% 0.004 219.55;\r
    --uchu-dark-gray: oklch(var(--uchu-dark-gray-raw));\r
\r
    /*** red ***/\r
    --uchu-light-red-raw: 88.98% 0.052 3.28;\r
    --uchu-light-red: oklch(var(--uchu-light-red-raw));\r
\r
    --uchu-dark-red-raw: 45.8% 0.177 17.7;\r
    --uchu-dark-red: oklch(var(--uchu-dark-red-raw));\r
\r
    /*** purple ***/\r
    --uchu-light-purple-raw: 89.1% 0.046 305.24;\r
    --uchu-light-purple: oklch(var(--uchu-light-purple-raw));\r
\r
    --uchu-dark-purple-raw: 39.46% 0.164 298.29;\r
    --uchu-dark-purple: oklch(var(--uchu-dark-purple-raw));\r
\r
    /*** blue ***/\r
    --uchu-light-blue-raw: 89.66% 0.046 260.67;\r
    --uchu-light-blue: oklch(var(--uchu-light-blue-raw));\r
\r
    --uchu-blue-raw: 62.39% 0.181 258.33;\r
    --uchu-blue: oklch(var(--uchu-blue-raw));\r
\r
    --uchu-dark-blue-raw: 43.48% 0.17 260.2;\r
    --uchu-dark-blue: oklch(var(--uchu-dark-blue-raw));\r
\r
    /*** green ***/\r
    --uchu-light-green-raw: 93.96% 0.05 148.74;\r
    --uchu-light-green: oklch(var(--uchu-light-green-raw));\r
\r
    --uchu-green-raw: 79.33% 0.179 145.62;\r
    --uchu-green: oklch(var(--uchu-green-raw));\r
\r
    --uchu-dark-green-raw: 58.83% 0.158 145.05;\r
    --uchu-dark-green: oklch(var(--uchu-dark-green-raw));\r
\r
    /*** general ***/\r
    --uchu-yang-raw: 99.4% 0 0;\r
    --uchu-yang: oklch(var(--uchu-yang-raw));\r
\r
    --uchu-yin-raw: 14.38% 0.007 256.88;\r
    --uchu-yin: oklch(var(--uchu-yin-raw));\r
\r
    /*** code-tests vars ***/\r
\r
    --spacer: calc(1em - 7px);\r
    --small-spacer: calc(var(--spacer) / 2);\r
\r
    --color-success: var(--uchu-green);\r
    --color-fail: var(--uchu-red);\r
    --color-process: var(--uchu-blue);\r
\r
    --text-surface: var(--uchu-yin);\r
    --text-result: var(--uchu-yang); /* --uchu-yang: #fdfdfd; */\r
    --text-collapse-icon: var(--uchu-dark-gray);  /* --uchu-dark-gray: #878a8b; */\r
    --text-hook-summary: var(--uchu-dark-purple);\r
    --text-success: var(--uchu-dark-green); /* --uchu-dark-green: #2e943a; */\r
    --text-fail: var(--uchu-dark-red); /* --uchu-dark-red: #a30d30; */\r
    --text-process: var(--uchu-dark-blue); /* --uchu-dark-blue: #0949ac; */\r
    --text-button: var(--uchu-yang); /* --uchu-dark-blue: #0949ac; */\r
    --text-placeholder: var(--uchu-dark-gray);\r
\r
    --surface-0: var(--uchu-light-gray);\r
    --surface-test: var(--uchu-yang);\r
    --surface-test-summary: var(--uchu-gray);\r
    --surface-hook-summary: var(--uchu-light-purple);\r
    --surface-success: var(--uchu-light-green);\r
    --surface-fail: var(--uchu-light-red);\r
    --surface-process: var(--uchu-light-blue);\r
    --surface-button: var(--uchu-blue); /* --uchu-blue: #3984f2 */\r
    --surface-button-hover: var(--uchu-light-blue);\r
    --surface-button-active: var(--uchu-dark-blue);\r
    --surface-button-cancel: var(--uchu-dark-blue);\r
\r
    --border-test: solid 1px var(--uchu-dark-gray);\r
    --border-hook: solid 1px var(--uchu-dark-purple);\r
    --border-success: solid 1px var(--uchu-dark-green);\r
    --border-fail: solid 1px var(--uchu-dark-red);\r
    --border-process: solid 1px var(--uchu-dark-blue);\r
    --border-button: solid 1px var(--uchu-blue);\r
\r
    --success-icon: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="%232e943a" d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>');\r
    --info-icon: url('data:image/svg+xml,%3Csvg%20viewBox%3D%220%200%2022.812714%2022.814663%22%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20style%3D%22fill%3Atransparent%3Bstroke%3Atransparent%3Bstroke-width%3A0.999999%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dasharray%3Anone%3Bstroke-dashoffset%3A29.2913%3Bstroke-opacity%3A1%22%20d%3D%22M%2022.295505%2C11.407332%20A%2010.889144%2C10.889144%200%200%201%2011.406424%2C22.296479%2010.889144%2C10.889144%200%200%201%200.51720881%2C11.407332%2010.889144%2C10.889144%200%200%201%2011.406424%2C0.51818382%2010.889144%2C10.889144%200%200%201%2022.295505%2C11.407332%20Z%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22m%2013.945668%2C4.3053761%20c%200.150778%2C-0.96462%20-0.30687%2C-1.43709%20-1.36997%2C-1.43709%20-1.063%2C0%20-1.668452%2C0.47247%20-1.81923%2C1.43709%20-0.150779%2C0.96462%200.306971%2C1.43708%201.369971%2C1.43708%201.004%2C0%201.66845%2C-0.47246%201.819229%2C-1.43708%20z%20M%2011.693889%2C17.829726%2013.373994%2C7.0811161%20h%20-2.9333%20L%208.7605887%2C17.829726%20Z%22%20style%3D%22font-size%3A19.6861px%3Bfont-family%3APassageway%3B-inkscape-font-specification%3APassageway%3Bfill%3A%23a30d30%3Bstroke-width%3A2.5%3Bstroke-linejoin%3Around%3Bstroke-miterlimit%3A6.3%3Bstroke-dashoffset%3A29.2913%22%20aria-label%3D%22i%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E');\r
\r
    --font-text: system-ui, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\r
\r
    /*** styles ***/\r
\r
    color-scheme: light dark;\r
    display: grid;\r
    gap: var(--spacer);\r
    background-color: var(--surface-0);\r
    color: var(--text-surface); \r
    padding: var(--small-spacer);\r
    font-family: var(--font-text);\r
}\r
\r
#header\r
{\r
    display: grid;\r
    grid-template-columns: 1fr auto;\r
    align-items: center;\r
    gap: var(--spacer);\r
    border-bottom: solid 2px;\r
    padding: var(--spacer);\r
    margin-bottom: var(--spacer);\r
    user-select: none;\r
}\r
\r
#title\r
{\r
    font-weight: bold;\r
    font-size: 16px;\r
}\r
\r
.hook\r
{\r
    display: none;\r
}\r
:host(.has-before-hook) #before-all-details\r
,:host(.has-after-hook) #after-all-details\r
{\r
    display: initial;\r
}\r
:host(.has-required-before-hook) #required-before-any-details\r
,:host(.has-required-after-hook) #required-after-any-details\r
{\r
    display: initial;\r
}\r
\r
#required-before-any-summary\r
,#required-after-any-summary\r
{\r
    background: var(--surface-process);\r
    color: var(--text-process);\r
    border: solid 1px var(--text-process);\r
    grid-template-columns: auto auto 1fr;\r
}\r
\r
#tests\r
{\r
    margin: 0;\r
    padding: 0;\r
    list-style: none;\r
    display: grid;\r
    grid-auto-rows: max-content;\r
    gap: var(--spacer);\r
}\r
\r
summary\r
{\r
    display: grid;\r
    gap: var(--spacer);\r
    padding: var(--small-spacer) var(--spacer);\r
    align-items: center;\r
}\r
summary::before\r
{\r
    content: '';\r
    width: 16px;\r
    height: 16px;\r
    background: url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'14px'%20height%3D'14px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23878a8b'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");\r
    transform: rotate(-90deg);\r
    transition: transform ease-out 200ms;\r
}\r
[open] > summary::before\r
{\r
    transform: rotate(0);\r
    /* background: var(--surface-test-summary); */\r
}\r
\r
:host(.running) .run[data-all]\r
{\r
    color: var(--text-surface);\r
    background-color: oklch(89.68% 0.002 197.12);\r
    border-color: oklch(63.12% 0.004 219.55);\r
}\r
:host(.running) .run[data-all]:hover\r
{\r
    background-color: oklch(95.57% 0.003 286.35);\r
    border-color: oklch(63.12% 0.004 219.55);\r
}\r
:host(.running) .run[data-all]:active\r
{\r
    background-color: oklch(63.12% 0.004 219.55);\r
    border-color: oklch(53.12% 0.004 219.55);\r
}\r
:host(.running) .run[data-all]::before\r
{\r
    display: none;\r
}\r
\r
#before-all-summary\r
,#after-all-summary\r
{\r
    background: var(--surface-hook-summary);\r
    color: var(--text-hook-summary);\r
    grid-template-columns: auto auto 1fr;\r
}\r
\r
.result-icon\r
{\r
    --background-size: 24px;\r
    width: var(--background-size);\r
    height: var(--background-size);\r
\r
    display: flex;\r
    align-items: center;\r
    justify-content: center;\r
\r
    border: solid 1px currentColor;\r
    border-radius: 50%;\r
}\r
.result-icon::before\r
{\r
    content: '\u22EF';\r
}\r
\r
.hook\r
{\r
    border: var(--border-hook);\r
}\r
\r
.test\r
,#before-all-details\r
,#after-all-details\r
{\r
    border: var(--border-test);\r
    border-radius: 2px;\r
}\r
\r
.test summary\r
{\r
    background: var(--surface-test-summary);\r
    grid-template-columns: auto auto 1fr auto;\r
}\r
\r
.test.running .result-icon\r
,.hook.running .result-icon\r
{\r
    border: var(--border-process);\r
    background: var(--surface-process);\r
}\r
.test.success .result-icon\r
,.hook.success .result-icon\r
{\r
    border: var(--border-success);\r
    background: var(--surface-success)\r
    var(--success-icon);\r
    background-repeat: no-repeat;\r
    background-position: center;\r
    background-size: var(--icon-size, 16px) var(--icon-size, 16px);\r
}\r
.test.fail .result-icon\r
,.hook.fail .result-icon\r
{\r
    border: var(--border-fail);\r
    background: var(--surface-fail)\r
    var(--info-icon);\r
    background-repeat: no-repeat;\r
    background-position: center;\r
    transform: rotate(175deg);\r
}\r
.test:is(.success,.fail) .result-icon::before\r
,.hook:is(.success,.fail) .result-icon::before\r
{\r
    display: none;\r
}\r
.test:is(.running) .result-icon::before\r
,.hook:is(.running) .result-icon::before\r
{\r
    content: '';\r
    --color: var(--text-process);\r
    --animation-timing-function: linear;\r
    --animation-duration: 2s;\r
    width: var(--icon-size, 18px);\r
    height: var(--icon-size, 18px);\r
    mask-image: radial-gradient(circle at 50% 50%, transparent calc(var(--icon-size, 18px) / 3), black calc(var(--icon-size, 18px) / 3));\r
    background-image: conic-gradient(transparent, transparent 135deg, var(--color));\r
    border-radius: 50%;\r
    animation: var(--animation-timing-function) var(--animation-duration) infinite spin;\r
    margin: 2px;\r
}\r
\r
.description\r
{\r
    user-select: none;\r
}\r
\r
.test .result\r
,.hook .result\r
{\r
    background: var(--surface-test);\r
    border: var(--border-test);\r
    border-radius: 2px;\r
    margin: var(--small-spacer);\r
}\r
\r
.test .result:empty::before\r
,.results:empty::before\r
{\r
    content: "[Test has not been run]";\r
    font-style: italic;\r
    font-size: 11px;\r
    color: var(--text-placeholder);\r
}\r
.results:empty::before\r
{\r
    content: "[Tests have not been run]";\r
}\r
.before-result:empty\r
,.after-result:empty\r
{\r
    display: none;\r
}\r
\r
.test .result\r
,.results\r
,.before-result\r
,.after-result\r
{\r
    padding: var(--small-spacer) var(--spacer);\r
}\r
\r
pre\r
{\r
    margin: var(--small-spacer);\r
}\r
\r
.run\r
{\r
    width: auto;\r
    min-width: auto;\r
    max-width: auto;\r
    appearance: none;\r
    display: inline-flex;\r
    justify-content: center;\r
    align-items: center;\r
    padding: 3px 10px 3px 7px;\r
    font-size: 11px;\r
    gap: var(--small-spacer);\r
    border: var(--border-button);\r
    background: var(--surface-button);\r
    border-radius: 4px;\r
    text-shadow: 1px 1px rgb(0 0 0 / .2);\r
    color: var(--text-button);\r
}\r
.run:hover\r
{\r
    background: oklch(68.39% 0.181 258.33);\r
}\r
.run:active\r
{\r
    background: oklch(50.39% 0.181 258.33);\r
}\r
.run::before\r
{\r
    content: '';\r
    display: block;\r
    width: 16px;\r
    height: 16px;\r
    transform: rotate(-90deg);\r
    background: \r
    url("data:image/svg+xml,%3Csvg%20viewBox%3D'0%200%2020%2020'%20width%3D'16px'%20height%3D'16px'%20fill%3D'none'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cg%20stroke-width%3D'0'%3E%3C%2Fg%3E%3Cg%20stroke-linecap%3D'round'%20stroke-linejoin%3D'round'%3E%3C%2Fg%3E%3Cg%3E%3Cpath%20d%3D'M8.72798%2015.795L3.72798%207.795C3.10356%206.79593%203.82183%205.5%204.99998%205.5L15%205.5C16.1781%205.5%2016.8964%206.79593%2016.272%207.795L11.272%2015.795C10.6845%2016.735%209.31549%2016.735%208.72798%2015.795Z'%20fill%3D'%23fdfdfd'%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E");\r
}\r
\r
\r
@media (prefers-color-scheme: dark) \r
{\r
    :host\r
    {\r
        --text-surface: var(--uchu-yang);\r
        --text-result: var(--uchu-yang);\r
\r
        --surface-0: var(--uchu-yin);\r
        --surface-test: oklch(25.11% 0.006 258.36);\r
        --surface-test-summary: oklch(35.02% 0.005 236.66);\r
    }\r
    :host(.running) .run[data-all]\r
    {\r
        background-color: oklch(35.02% 0.005 236.66);\r
        border-color: oklch(35.02% 0.005 236.66);\r
    }\r
    :host(.running) .run[data-all]:hover\r
    {\r
        background-color: oklch(63.12% 0.004 219.55);\r
        border-color:oklch(63.12% 0.004 219.55);\r
    }\r
    :host(.running) .run[data-all]:active\r
    {\r
        background-color: oklch(25.11% 0.006 258.36);\r
        border-color: oklch(25.11% 0.006 258.36);\r
    }\r
}\r
\r
@keyframes spin\r
{\r
    from { transform: rotate(0deg); }\r
    to { transform: rotate(360deg); }\r
}`;var x=`<slot name="header">\r
    <header id="header">\r
        <span id="title"><slot name="title"><span id="title-text">Tests</span></slot></span>\r
        <slot name="play-button">\r
            <button type="button" class="run" data-all>\r
                <slot name="play-button-label">\r
                    <span id="play-button-label" class="button-label label icon">Run Tests</span>\r
                </slot>\r
            </button>\r
        </slot>\r
        <slot name="details"></slot>\r
    </header>\r
</slot>\r
<details id="required-before-any-details" class="hook">\r
    <summary id="required-before-any-summary">\r
        <span id="required-before-any-result-icon" class="result-icon"></span>\r
        <span id="required-before-any-description" class="description">Results from Required Before Any Hook</span>\r
    </summary>\r
    <div id="required-before-any-results" class="results"></div>\r
</details>\r
<details id="before-all-details" class="hook">\r
    <summary id="before-all-summary">\r
        <span id="before-all-result-icon" class="result-icon"></span>\r
        <span id="before-all-description" class="description">Results from Before All Hook</span>\r
    </summary>\r
    <div id="before-all-results" class="results"></div>\r
</details>\r
<ul id="tests"></ul>\r
<details id="after-all-details" class="hook">\r
    <summary id="after-all-summary">\r
        <span id="after-all-result-icon" class="result-icon"></span>\r
        <span id="after-all-description" class="description">Results from After All Hook</span>\r
    </summary>\r
    <div id="after-all-results" class="results"></div>\r
</details>\r
<details id="required-after-any-details" class="hook">\r
    <summary id="required-after-any-summary">\r
        <span id="required-after-any-result-icon" class="result-icon"></span>\r
        <span id="required-after-any-description" class="description">Results from Required After Any Hook</span>\r
    </summary>\r
    <div id="required-after-any-results" class="results"></div>\r
</details>\r
\r
<template id="prompt-template">\r
    <div class="prompt" part="prompt">\r
        <div class="prompt-display">\r
            <span class="icon prompt-icon"></span>\r
            <span class="label prompt-label"></span>\r
        </div>\r
        <div class="prompt-actions">\r
            <button class="prompt-button accept" type="button">Accept</button>\r
            <button class="prompt-button reject" type="button">Reject</button>\r
        </div>\r
    </div>\r
</template>`;var y=class extends Promise{async toBeDefined(e){if(await this==null)throw new Error(`${e??"Value"} is undefined`)}async toBe(e,r=!1){let t=await this;if((r==!0?t===e:t==e)==!1)throw new Error(`  Value is not equal.
  Expected: ${e}
  Result: ${t}`)}async toContainText(e){let r=await this}async toHaveAttribute(e){let r=await this;if(!(r instanceof HTMLElement))throw new Error("Unable to check for attribute on non-HTMLElement target");if(r.getAttribute(e))throw new Error("Taret does not have attribute")}},E=class f{static timeoutMS=500;static#e;static#r;static expect(e){return new y(async(t,s)=>{if(e instanceof Promise){let n=await e;t(n);return}t(e)})}static expectSync(e){return new y(async(t,s)=>{if(e instanceof Promise){let n=await e;t(n);return}t(e)})}static expectBefore(e){return new y(async(t,s)=>{if(e instanceof Promise){let n=await e;t(n);return}t(e)})}static async prompt(e,r,t,s){return new Promise((n,l)=>{let i=e.findElement("prompt-template"),o=f.createElementFromTemplate(i);o.querySelector(".label").textContent=t;let a=u=>{let c=u.composedPath();if(c.find(h=>h instanceof HTMLButtonElement&&h.classList.contains("accept"))!=null){let h=s?.onAccept?.()??!0;o.removeEventListener("click",a),n(h);return}if(c.find(h=>h instanceof HTMLButtonElement&&h.classList.contains("reject"))!=null){let h=s?.onReject?.()??!1;o.removeEventListener("click",a),n(h);return}};o.addEventListener("click",a),s?.acceptLabel!=null&&(o.querySelector(".accept").textContent=s.acceptLabel),s?.rejectLabel!=null&&(o.querySelector(".reject").textContent=s.rejectLabel);let p=r instanceof HTMLDetailsElement?r:r.querySelector(".test-details");p!=null&&(p.open=!0),r.querySelector(".result")?.append(o)})}static createElementFromTemplate(e,r){let t=e instanceof HTMLTemplateElement?e:document.querySelector(e);if(t==null)throw new Error(`Unable to find template element from selector: ${e}`);let s=t.content.cloneNode(!0).querySelector("*");if(s==null)throw new Error("Unable to find first child of template element");return r?.append(s),s}};function S(f){return E.expect(f)}function $(f,e,r,t){return E.prompt(f,e,r,t)}var A=":not(slot,defs,g,rect,path,circle,ellipse,line,polygon,text,tspan,use,svg image,svg title,desc,template,template *)";function L(f){let e=[...f.querySelectorAll(`${A}[id]`)];for(let t=0;t<e.length;t++)e[t].part.add(e[t].id);let r=[...f.querySelectorAll(`${A}[class]`)];for(let t=0;t<r.length;t++)r[t].part.add(...r[t].classList)}var P=(l=>(l.BeforeAll="beforeall",l.AfterAll="afterall",l.BeforeEach="beforeeach",l.AfterEach="aftereach",l.RequiredBeforeAny="requiredbeforeany",l.RequiredAfterAny="requiredafterany",l))(P||{}),F=(n=>(n.BeforeAll="beforeall",n.AfterAll="afterall",n.BeforeTest="beforetest",n.AfterTest="aftertest",n.Cancel="cancel",n))(F||{}),v=Symbol("No Test Defined"),H=new CSSStyleSheet;H.replaceSync(w);var C="code-tests",k=class extends HTMLElement{componentParts=new Map;getElement(e){if(this.componentParts.get(e)==null){let r=this.findElement(e);r!=null&&this.componentParts.set(e,r)}return this.componentParts.get(e)}findElement(e){return this.shadowRoot.getElementById(e)}#e={};#r=!0;constructor(){super(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=x,this.shadowRoot.adoptedStyleSheets.push(H),this.#c=this.#h.bind(this)}connectedCallback(){if(L(this.shadowRoot),this.addEventListener("click",this.#c),this.getAttribute("auto")=="false")return;let e=this.#d();e!=null&&this.loadTests(e)}disconnectedCallback(){this.removeEventListener("click",this.#c)}#c;#h(e){let r=e.composedPath().find(l=>l instanceof HTMLButtonElement&&l.classList.contains("run"));if(r==null)return;let t=r.closest("li");if(t==null){if(r.hasAttribute("data-all")==!0)if(this.classList.contains("running")){if(this.classList.contains("canceled"))return;this.cancel()}else this.runTests();return}let s=t.dataset.testId;if(s==null)return;let n=this.#s.get(s);n!=null&&(this.isCanceled=!1,this.classList.remove("canceled"),this.part.remove("canceled"),this.#u(s,n))}#d(){return this.getAttribute("src")??this.getAttribute("test")??this.getAttribute("tests")??this.getAttribute("run")??this.getAttribute("path")}async loadTests(e){let r=e??this.#d();if(r!=null)try{this.getElement("tests").innerHTML="",this.#s.clear(),this.classList.remove("has-before-hook"),this.classList.remove("has-after-hook");let t=window.location.href.lastIndexOf("/"),n=window.location.href.substring(t).indexOf(".")!=-1==!0?window.location.href.substring(0,t+1):window.location.href,l=n+r.substring(0,r.lastIndexOf("/")+1),i=n+r,o=await(await fetch(i)).text();o=o.replaceAll(/['"`](((\.\/)|(\.\.\/))+(.*))['"`]/g,`'${l}$1'`);let a=new File([o],r.substring(r.lastIndexOf("/")),{type:"text/javascript"}),u=await import(URL.createObjectURL(a)),c=u.tests??u.default;if(c==null)throw new Error(`Unable to find tests definition in file at path: ${r}`);let g=c.beforeall;g!=null&&(this.#e.beforeall=g,delete c.beforeall,this.classList.add("has-before-hook"));let b=c.afterall;b!=null&&(this.#e.afterall=b,delete c.afterall,this.classList.add("has-after-hook"));let h=c.beforeeach;h!=null&&(this.#e.beforeeach=h,delete c.beforeeach);let m=c.aftereach;m!=null&&(this.#e.aftereach=m,delete c.aftereach);let d=c.requiredbeforeany;d!=null&&(this.#e.requiredbeforeany=d,delete c.requiredbeforeany,this.classList.add("has-required-before-hook"),this.part.add("has-required-before-hook"));let T=c.requiredafterany;T!=null&&(this.#e.requiredafterany=T,delete c.requiredafterany,this.classList.add("has-required-after-hook"),this.part.add("has-required-after-hook"));for(let[q,R]of Object.entries(c))this.#m(q,R)}catch(t){this.#i("An error occurred while loading the tasks:",t)}}isCanceled=!1;cancel(){this.isCanceled=!0,this.classList.add("canceled"),this.part.add("canceled"),this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,composed:!0}))}async runTests(){this.dispatchEvent(new CustomEvent("beforeall",{bubbles:!0,composed:!0})),this.#r=!0,this.classList.add("running"),this.isCanceled=!1,this.classList.remove("canceled"),this.part.remove("canceled"),this.toggleAttribute("success",!1);let e=this.findElement("play-button-label");e!=null&&(e.textContent="Cancel"),this.#f();let r=this.hasAttribute("in-order"),t=this.#e.requiredbeforeany;if(t!=null){let o;try{let a=this.getElement("required-before-any-details");if(a.classList.add("running"),a.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");o=await t(this,a),this.#t(o,!0,"before",!0),a.part.remove("running"),a.classList.remove("running")}catch(a){this.#t(o,!1,"before",!0,a),console.error(a),this.#r=!1,this.classList.remove("running"),this.part.remove("running"),e!=null&&(e.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}}let s=this.#e.beforeall;if(s!=null){let o;try{let a=this.getElement("before-all-details");if(a.classList.add("running"),a.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");o=await s(this,a),this.#t(o,!0,"before",!1),a.part.remove("running"),a.classList.remove("running")}catch(a){this.#t(o,!1,"before",!1,a),console.error(a),this.#r=!1,this.classList.remove("running"),this.part.remove("running"),e!=null&&(e.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}}if(r==!1){let o=[];for(let[a,p]of this.#s)o.push(this.#u(a,p));await Promise.all(o)}else for(let[o,a]of this.#s){if(this.#r==!1)break;await this.#u(o,a,!1)}if(this.#r==!1){this.classList.remove("running"),this.part.remove("running"),e!=null&&(e.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}let n=this.#e.afterall;if(n!=null){let o;try{let a=this.getElement("after-all-details");if(a.classList.add("running"),a.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");o=await n(this,a),this.#t(o,!0,"after",!1),a.part.remove("running"),a.classList.remove("running")}catch(a){this.#t(o,!1,"after",!1,a),console.error(a);let p=this.#e.requiredafterany;if(p!=null){let u;try{let c=this.getElement("required-after-any-details");if(c.classList.add("running"),c.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");u=await p(this,c),this.#t(u,!0,"after",!0),c.part.remove("running"),c.classList.remove("running")}catch(c){this.#t(u,!1,"after",!0,c),console.error(c)}}this.#r=!1,this.classList.remove("running"),this.part.remove("running"),e!=null&&(e.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}));return}}let l=this.#e.requiredafterany;if(l!=null){let o;try{let a=this.getElement("required-after-any-details");if(a.classList.add("running"),a.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");o=await l(this,a),this.#t(o,!0,"after",!0),a.part.remove("running"),a.classList.remove("running")}catch(a){this.#t(o,!1,"after",!0,a),console.error(a),this.#r=!1}}let i=this.shadowRoot.querySelectorAll('[success="false"]');this.setAttribute("success",i.length==0?"true":"false"),this.classList.remove("running"),this.part.remove("running"),e!=null&&(e.textContent="Run Tests"),this.dispatchEvent(new CustomEvent("afterall",{bubbles:!0,composed:!0}))}#f(){for(let[t,s]of this.#s){let n=this.getElement("tests").querySelector(`[data-test-id="${t}"]`);if(n==null){this.#i(`Unable to find test element for test: ${t}`);return}n.toggleAttribute("success",!1),n.classList.remove("success","fail"),n.part.remove("success","fail")}let e=this.getElement("before-all-details");e.toggleAttribute("success",!1),e.classList.remove("success","fail"),e.part.remove("success","fail");let r=this.getElement("after-all-details");r.toggleAttribute("success",!1),r.classList.remove("success","fail"),r.part.remove("success","fail")}async#u(e,r,t=!0){let s=this.getElement("tests").querySelector(`[data-test-id="${e}"]`);if(s==null){this.#i(`Unable to find test element for test: ${e}`);return}s.toggleAttribute("success",!1),s.classList.add("running"),s.part.add("running"),s.classList.remove("success","fail"),s.part.remove("success","fail");let n=s.querySelector(".result-icon");n?.classList.remove("success","fail"),n?.part.remove("success","fail"),n?.classList.add("running"),n?.part.add("running");let l=s.querySelector(".error-message");l!=null&&(l.textContent="");let i=s.querySelector("details");i!=null&&(i.open=!1);let o=v,a,p=v,u;try{let c=this.dispatchEvent(new CustomEvent("beforetest",{bubbles:!0,cancelable:!0,composed:!0,detail:{testElement:s}}));if(t==!0){let h=this.#e.requiredbeforeany;if(h!=null){let m;try{let d=this.getElement("required-before-any-details");if(d.classList.add("running"),d.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");m=await h(this,d),this.#t(m,!0,"before",!0),d.part.remove("running"),d.classList.remove("running")}catch(d){this.#t(m,!0,"before",!0,d),console.error(d),this.#r=!1;return}}}if(this.#r==!1)throw new Error("Tests have been disabled from continuing to run.");if(c==!1||this.isCanceled==!0)throw new Error("Test has been cancelled");let g=this.#e.beforeeach;if(g!=null&&(o=await g(this,s)),this.isCanceled==!0)throw new Error("Test has been cancelled");if(a=await r(this,s),this.isCanceled==!0)throw new Error("Test has been cancelled");let b=this.#e.aftereach;if(b!=null&&(p=await b(this,s)),t==!0){let h=this.#e.requiredafterany;if(h!=null){let m;try{let d=this.getElement("required-before-any-details");if(d.classList.add("running"),d.part.add("running"),this.isCanceled==!0)throw new Error("Test has been cancelled");m=await h(this,d),this.#t(m,!0,"after",!0),d.part.remove("running"),d.classList.remove("running")}catch(d){this.#t(m,!0,"after",!0,d),console.error(d),this.#r=!1;return}}}u="before",o!=v&&this.#a(s,o,!0,void 0,u),u=void 0,this.#a(s,a,!0,void 0,u),u="after",p!=v&&this.#a(s,p,!0,void 0,u)}catch(c){this.#a(s,a,!1,c,u),console.error(c),this.#r=!1}finally{s?.classList.remove("running"),s?.part.remove("running"),n?.classList.remove("running"),n?.part.remove("running"),this.dispatchEvent(new CustomEvent("aftertest",{bubbles:!0,cancelable:!0,composed:!0,detail:{testElement:s}}))}}#a(e,r,t,s,n){if(r instanceof HTMLElement)this.#o(e,r,t,n);else if(r==null){let i=n==null?"Passed":"Hook Ran Successfully",o=this.#n(t==!0?`${i}`:`Failed${s!=null?`:
${s.message}`:""}`,t,n);this.#o(e,o,t,n)}else if(typeof r=="string"){let i=this.#n(`${r}${s==null?"":`:
${s.message}`}`,t,n);this.#o(e,i,t,n)}else if(typeof r=="object"){let i=r;if(i.success!=null&&i.expected!=null&&i.value!=null){let o=n==null?"Passed":"Success",a=n==null?"Failed":"Fail",p=this.#n(`${i.success==!0?`${o}:`:`${a}:`}
Expected:${i.expected}
Result:${i.value}`,i.success,n);this.#o(e,p,t,n)}}let l=e.querySelector("details");l!=null&&(l.open=!0)}#t(e,r,t,s,n){if(e instanceof HTMLElement)this.#l(e,r,t,s);else{let i;if(e==null)i=this.#n(r==!0?"Hook Ran Successfully":`Failed${n!=null?`:
${n.message}`:""}`,r),this.#l(i,r,t,s);else if(typeof e=="string")i=this.#n(`${e}${n==null?"":`:
${n.message}`}`,r),this.#l(i,r,t,s);else if(typeof e=="object"){let o=e;o.success!=null&&o.expected!=null&&o.value!=null&&(i=this.#n(`${o.success==!0?"Success:":"Fail:"}
Expected:${o.expected}
Result:${o.value}`,o.success),this.#l(i,r,t,s))}}let l=this.getElement(`${t}-all-details`);l!=null&&(l.open=!0)}static create(e){return document.createElement("code-tests")}#s=new Map;#m(e,r){let t=D();this.#s.set(t,r);let s=this.#g(t,e);return this.getElement("tests").append(s),t}#g(e,r){let t=document.createElement("li");t.dataset.testId=e,t.classList.add("test"),t.part.add("test");let s=document.createElement("details");s.classList.add("test-details"),s.part.add("test-details");let n=document.createElement("summary");n.classList.add("test-summary"),n.part.add("test-summary");let l=document.createElement("div");l.classList.add("result-icon"),l.part.add("result-icon"),n.append(l);let i=document.createElement("span");i.classList.add("description","test-description"),i.textContent=r,n.append(i);let o=document.createElement("button");o.classList.add("run","test-run"),o.part.add("run","test-run"),o.textContent="Run Test",o.title="Run Test",n.append(o);let a=document.createElement("div");a.classList.add("before-result","test-before-result"),a.part.add("before-result","test-before-result");let p=document.createElement("div");p.classList.add("result","test-result"),p.part.add("result","test-result");let u=document.createElement("div");return u.classList.add("after-result","test-after-result"),u.part.add("after-result","test-after-result"),s.append(n),s.append(a),s.append(p),s.append(u),t.append(s),t}#o(e,r,t,s){e.setAttribute("success",t==!0?"true":"false"),e.classList.toggle("success",t),e.part.toggle("success",t),e.classList.toggle("fail",!t),e.part.toggle("fail",!t);let n=e.querySelector(".result-icon");n?.classList.toggle("success",t),n?.part.toggle("success",t),n?.classList.toggle("fail",!t),n?.part.toggle("fail",!t);let l=e.querySelector(`.${s==null?"result":s=="before"?"before-result":"after-result"}`);if(l==null){this.#i("Unable to find result element");return}l.innerHTML="",l.appendChild(r)}#n(e,r,t){let s=document.createElement("code");s.classList.add("code"),s.part.add("code");let n=document.createElement("pre");n.textContent=e;let l=r==!0?"success-message":"error-message";return n.classList.add("pre",l),n.part.add("pre",l),s.appendChild(n),s}#l(e,r,t,s){let n=s==!0?`required-${t}-any`:`${t}-all`,l=this.getElement(`${n}-details`),i=this.getElement(`${n}-results`);l.setAttribute("success",r==!0?"true":"false"),l.classList.toggle("success",r),l.part.toggle("success",r),l.classList.toggle("fail",!r),l.part.toggle("fail",!r),i.innerHTML="",i.appendChild(e)}#i(e,r){r instanceof Error&&(e+=`
${r.message}`,console.error(r));let t=document.createElement("li");t.classList.add("error","process-error"),t.part.add("error","process-error");let s=document.createElement("code");s.classList.add("code","process-error-code"),s.part.add("code","process-error-code");let n=document.createElement("pre");n.classList.add("pre","process-error-pre"),n.part.add("pre","process-error-pre"),n.textContent=e,s.append(n),t.append(s),this.getElement("tests").append(t)}#p(e){if(e=="ordered"){let r=this.shadowRoot.querySelector("ul");if(r==null)return;let t=this.shadowRoot?.querySelectorAll("li"),s=document.createElement("ol");t!=null&&s.append(...t),s.id="tests",r.replaceWith(s)}else{let r=this.shadowRoot.querySelector("ol");if(r==null)return;let t=this.shadowRoot?.querySelectorAll("li"),s=document.createElement("ul");s.id="tests",t!=null&&s.append(...t),r.replaceWith(s)}}static observedAttributes=["in-order"];attributeChangedCallback(e,r,t){e=="in-order"&&(t==null?this.#p("unordered"):this.#p("ordered"))}};function D(){let f=new Uint8Array(20);crypto.getRandomValues(f);let e=[].slice.apply(f).map(function(t){return String.fromCharCode(t)}).join("");return btoa(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}customElements.get(C)==null&&customElements.define(C,k);export{F as CodeTestEventType,E as CodeTests,k as CodeTestsElement,P as HookType,S as expect,$ as prompt};
